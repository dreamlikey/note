### API安全问题

1. 数据被抓包窃取
2. 数据被掉包篡改
3. 数据被爬取泄露

#### 加密类型

##### 对称加密

优点

​	解密效率高

缺点

​	有秘钥泄露风险

##### 非对称加密

优点

​	安全性高，公钥、私钥配对，公钥加密私钥解密

缺点

​	效率低

#### 数据被抓包窃取

##### 场景

用户登录，登录用户名、密码明文或密码加密文被窃取，黑客使用窃取到的密码明文或密码加密文登录用户账户



##### 解决方案

**1、设置登录信息过期时间**

Rsa(公钥+密码+时间戳)

将请求发送时间拼接到密码中，通过Rsa加密，后台接收到加密密码进行解密获取到请求发送时间，如果请求时间与当前比较超过一定范围则返回登录超时或请求超时。这种方式能降低数据窃取的风险，但在超时范围内登录没法预防。

currentTIme -sendTime > 1* 60 *1000 

​	return "登录超时";



**2、黑名单**

**设置登录信息过期时间**在超时范围内登录没法预防，在这种方案基础之上更进一步，将登录成功的Rsa(公钥+密码+时间戳)加密串存入一个list，每次登录遍历这个list集合看当前密文是否已存在，如果存在则认为非法请求，这个list就是黑名单。



#### 数据被掉包串改

##### 场景

支付、转账，篡改金额

##### 解决方案

**接口参数签名**

sign(uri+参数+token)，这里签名方式是简单举例，实际业务上进行签名的数据更加复杂，参数间有分隔符每种数据类型进行分隔还有数据的排序方式也不同，还有特定的签名加密算法， 当黑客拿到签名串以后无法识别，也无法篡改。

前台对uri+参数+token进行签名处理，后台接收到数据后进行签名解析，拿到参数（金额），



